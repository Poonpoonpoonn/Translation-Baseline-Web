(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t){e.exports={QUERY_USER_API:"http://localhost:13002/v1/config/adminuser",ADD_USER_API:"http://localhost:13002/v1/config/adminuser",QUERY_FULL_VERSION_CONTROL_API:"http://localhost:13002/v1/config/versioncontrol/full",QUERY_SUMMARIZE_VERSION_CONTROL_API:"http://localhost:13002/v1/config/versioncontrol/summarize",DELETE_SUMMARIZE_VERSION_CONTROL_API:"http://localhost:13002/v1/config/versioncontrol/summarize",QUERY_TABLE_MICROSERVICE_API:"http://localhost:13002/v1/config/tablemapping",ADD_VERSION_CONTROL_API:"http://localhost:13002/v1/config/versioncontrol/add",SAVE_TABLE_DETAIL_API:"http://localhost:13002/v1/config/tablemapping/detail",EDIT_TABLE_API:"http://localhost:13002/v1/config/tablestructure",EXPORT_DATA_API:"http://localhost:13002/v1/config/export",DELETE_USER_API:"http://localhost:13002/v1/config/adminuser",TABLE_MAPPING_INDEX:0,VERSION_CONTROL_INDEX:3,MANAGE_ADMIN_INDEX:5,ADD_VERSION_CONTROL_INDEX:4,EDIT_TABLE_INDEX:1,QUERY_TABLE_DETAIL_API:"http://localhost:13002/v1/config/tablemapping/detail",SNACK_BAR_SUCCESS:"success",SNACK_BAR_ERROR:"error",FLYWAY_SCRIPT_TABLE:"user_flyway_script",QUERY_FLYWAY_TABLE_API:"http://localhost:13002/v1/config/flywaytable",FLYWAY_TABLE_INDEX:2,QUERY_USER_ROLE_API:"http://localhost:13002/v1/config/userrole",DEV2:"Dev-2",DEV3:"Dev-3",DEV4:"Dev-4",DEV5:"Dev-5"}},273:function(e,t,a){e.exports=a(542)},278:function(e,t,a){},279:function(e,t,a){},540:function(e,t,a){e.exports=a.p+"static/media/logo.dd045942.svg"},542:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),i=a.n(o),s=a(544),l=(a(278),a(24)),c=a(25),u=a(27),h=a(26),m=a(28),d=a(545),p=(a(279),a(33)),g=a(65),f=a(41),E=a(5),b=a.n(E),v=a(8),y=a(129),T=a.n(y),w=a(81),C=a.n(w),S=a(29),O=a.n(S),k=a(57),A=a.n(k),D=a(69),j=a.n(D),M=a(124),_=a.n(M),N=a(39),R=a.n(N),I=a(128),x=a.n(I),P=a(22),U=a.n(P),L=a(268),V=a.n(L),B=a(265),F=a.n(B),z=a(264),q=a.n(z),W=a(266),Y=a.n(W),G=a(267),X=a.n(G),Q=a(137),J=a.n(Q),K=a(91),Z=a.n(K),H=a(68),$=a.n(H),ee=a(85),te=a.n(ee),ae=a(61),ne=a.n(ae),re=a(262),oe=a.n(re),ie=a(263),se=a.n(ie),le=a(269),ce=a.n(le),ue=a(40),he=a.n(ue),me=a(70),de=a.n(me),pe=a(546),ge=a(50),fe=a.n(ge),Ee=a(37),be=a.n(Ee),ve=a(132),ye=a.n(ve),Te=a(87),we=a.n(Te),Ce=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e,t){a.setState({value:t}),a.props.changeTab(t)},a.state={value:0},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.items,n=this.state.value;return r.a.createElement("div",{className:t.root},r.a.createElement(C.a,{position:"static"},r.a.createElement(ye.a,{value:n,onChange:this.handleChange,classes:{indicator:t.tabsIndicator}},r.a.createElement(we.a,{label:a[0]}),r.a.createElement(we.a,{label:a[1]}),r.a.createElement(we.a,{label:a[2]}))))}}]),t}(r.a.Component),Se=Object(v.withStyles)(function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper},tabsIndicator:{height:5}}})(Ce),Oe=a(35),ke=a.n(Oe),Ae=a(13),De=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).queryFullVersionControl=function(){a.setState({loading:!0}),fetch(Ae.QUERY_FULL_VERSION_CONTROL_API+"?env="+a.props.env,{method:"GET"}).then(function(e){if(200===e.status)return e.json();throw new Error(e.status)}).then(function(e){a.isMount&&a.setState({fullData:e,loading:!1})}).catch(function(e){a.setState({loading:!1})})},a.querySummarizeVersionControl=function(){a.setState({loading:!0}),fetch(Ae.QUERY_SUMMARIZE_VERSION_CONTROL_API+"?env="+a.props.env,{method:"GET"}).then(function(e){if(200===e.status)return e.json();throw new Error(e.status)}).then(function(e){a.setState({summarizeData:e,loading:!1})}).catch(function(e){a.setState({loading:!1})})},a.deleteSummarizeVersionControl=function(e){a.setState({loading:!0}),fetch(Ae.DELETE_SUMMARIZE_VERSION_CONTROL_API,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:e,env:a.props.env})}).then(function(e){if(200===e.status)return e.json();throw new Error(e.status)}).then(function(e){a.querySummarizeVersionControl()}).catch(function(e){a.setState({loading:!1})})},a.getMuiTheme=function(){return Object(v.createMuiTheme)({palette:{primary:be.a},typography:{useNextVariants:!0,fontSize:18},overrides:{MUIDataTableBodyCell:{root:{}},MUIDataTableSelectCell:{checked:{color:"#FF0266 !important"}}}})},a.fullColumns=[{name:"version",label:"Version",options:{filter:!0,sort:!0,sortDirection:"asc"}},{name:"autoDescription",label:"Auto Description",options:{filter:!0,sort:!0}},{name:"userDescription",label:"User Description",options:{filter:!0,sort:!0}},{name:"timestamp",label:"Timestamp",options:{filter:!0,sort:!0}},{name:"author",label:"Author",options:{filter:!0,sort:!0}}],a.summarizeColumns=[{name:"id",label:"ID",options:{filter:!0,sort:!0,sortDirection:"asc"}},{name:"version",label:"Version",options:{filter:!0,sort:!0}},{name:"description",label:"Description",options:{filter:!0,sort:!0}},{name:"remark",label:"Remark",options:{filter:!0,sort:!0}},{name:"timestamp",label:"Timestamp",options:{filter:!0,sort:!0}},{name:"author",label:"Author",options:{filter:!0,sort:!0}}],a.state={title:"Full Version Control",fullData:[],summarizeData:[],column:a.fullColumns,loading:!1,rows:20},a.changeTab=a.changeTab.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.isMount=!0,this.props.highlightTabMenu(Ae.VERSION_CONTROL_INDEX),this.queryFullVersionControl()}},{key:"componentWillUnmount",value:function(){this.isMount=!1}},{key:"changeTab",value:function(e){0===e?(this.setState({title:"Full Version Control",column:this.fullColumns}),0===this.state.fullData.length&&this.queryFullVersionControl()):1===e&&(this.setState({title:"Summarize Version Control",column:this.summarizeColumns}),0===this.state.summarizeData.length&&this.querySummarizeVersionControl())}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(ke.a,{active:this.state.loading,spinner:!0},r.a.createElement(Se,{changeTab:this.changeTab,items:["Full Version Control","Summarize Version Control"]}),r.a.createElement(v.MuiThemeProvider,{theme:this.getMuiTheme()},"Full Version Control"===this.state.title?r.a.createElement(fe.a,{title:this.state.title,data:this.state.fullData.map(function(e){return[e.version,e.auto_description,e.user_description,e.timestamp,e.author]}),columns:this.state.column,options:{selectableRows:!1,print:!1,rowsPerPage:20,responsive:"scroll",rowsPerPageOptions:[20,50,100,this.state.fullData.length]}}):r.a.createElement(fe.a,{title:this.state.title,data:this.state.summarizeData.map(function(e){return[e.id,e.version,e.description,e.remark,e.timestamp,e.author]}),columns:this.state.column,options:{filterType:"checkbox",print:!1,rowsPerPage:20,responsive:"scroll",rowsPerPageOptions:[20,50,100,this.state.summarizeData.length],onRowsDelete:function(t){for(var a in e.setState({loading:!0}),t.data)console.log("checking id ",t.data[a]," ",e.state.summarizeData[t.data[a].index]),e.deleteSummarizeVersionControl(e.state.summarizeData[t.data[a].index].id)}}}))))}}]),t}(n.Component),je=a(46),Me=a.n(je),_e=a(62),Ne=a.n(_e),Re=a(82),Ie=a.n(Re),xe=a(83),Pe=a.n(xe),Ue=a(49),Le=a.n(Ue),Ve=a(88),Be=a.n(Ve),Fe=a(105),ze=a.n(Fe),qe=Object(v.createMuiTheme)({typography:{useNextVariants:!0,fontSize:18},palette:{primary:ze.a,secondary:be.a}}),We=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e){return function(e){console.log("event target ",e.target),a.setState(Object(f.a)({},e.target.name,e.target.value))}},a.addVersionControl=function(){var e=a.state,t=e.version,n=e.description,r=e.remark;a.setState({loading:!0}),fetch(Ae.ADD_VERSION_CONTROL_API+"?env="+a.props.env,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({version:t,description:n,remark:r})}).then(function(e){if(200===e.status)return e.json();throw console.log("cannot save version control data"),new Error(e.statusText)}).then(function(e){console.log("add user json ",e),a.setState({loading:!1,showAlert:!0,alertType:"success",alertTitle:"Success!",alertMessage:"Successfully Add New Version Control."})}).catch(function(e){console.log("error: "+e),a.setState({loading:!1,showAlert:!0,alertType:"success",alertTitle:"Success!",alertMessage:"Cannot Add Version Control, Please try again. "+e.message})})},a.handleSave=function(){var e=!1,t=!1;""!==a.state.version&&" "!==a.state.version||(e=!0),""!==a.state.description&&" "!==a.state.description||(t=!0),!0===e||!0===t?a.setState({versionError:e,descriptionError:t}):a.addVersionControl()},a.state={version:"",description:"",remark:"",loading:!1,versionError:!1,descriptionError:!1,showAlert:!1,alertType:"",alertTitle:"",alertMessage:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.highlightTabMenu(Ae.ADD_VERSION_CONTROL_INDEX)}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(ke.a,{active:this.state.loading,spinner:!0},r.a.createElement(v.MuiThemeProvider,{theme:qe},r.a.createElement(Be.a,{show:this.state.showAlert,title:this.state.alertTitle,text:this.state.alertMessage,type:this.state.alertType,onOutsideClick:function(){return e.setState({showAlert:!1})},onConfirm:function(){return e.setState({showAlert:!1})}}),r.a.createElement("form",{className:t.container,noValidate:!0,autoComplete:"off"},r.a.createElement("br",null),r.a.createElement(Ne.a,{className:t.card},r.a.createElement(Pe.a,null,r.a.createElement("h2",null,"Add Version Control"),r.a.createElement(Me.a,{required:!0,error:this.state.versionError,id:"version",name:"version",label:"Version",className:t.textField,value:this.state.version,onChange:this.handleChange("version"),margin:"normal",variant:"filled"}),this.state.versionError&&r.a.createElement(Le.a,null,"This is required!"),r.a.createElement("br",null),r.a.createElement(Me.a,{required:!0,error:this.state.descriptionError,id:"description",label:"Description",name:"description",multiline:!0,rowsMax:"10",value:this.state.description,onChange:this.handleChange("description"),className:t.textField,margin:"normal",variant:"filled"}),this.state.descriptionError&&r.a.createElement(Le.a,null,"This is required!"),r.a.createElement("br",null),r.a.createElement(Me.a,{id:"remark",label:"Remark",name:"remark",multiline:!0,rowsMax:"10",value:this.state.remark,onChange:this.handleChange("remark"),className:t.textField,margin:"normal",variant:"filled"})),r.a.createElement(Ie.a,null,r.a.createElement(O.a,{onClick:this.handleSave,variant:"contained",size:"large",color:"secondary",className:t.margin},"Save"))))))}}]),t}(r.a.Component),Ye=Object(v.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},card:{minWidth:"100%"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:"100%"},dense:{marginTop:19},margin:{margin:e.spacing.unit},palette:{primary:ze.a,secondary:be.a}}})(We),Ge=a(90),Xe=a.n(Ge),Qe=a(60),Je=a.n(Qe),Ke=a(89),Ze=a.n(Ke),He=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){a.props.handleEdit()},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Je.a,{title:"Edit Table"},r.a.createElement(U.a,{className:e.iconButton,onClick:this.handleClick},r.a.createElement(Ze.a,null))))}}]),t}(r.a.Component),$e=Object(v.withStyles)({iconButton:{}},{name:"CustomToolbar"})(He),et=a(136),tt=a.n(et),at=a(134),nt=a.n(at),rt=a(135),ot=a.n(rt),it=0,st=!0,lt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).exportData=function(){ot.a.post(Ae.EXPORT_DATA_API,a.state.data,{responseType:"arraybuffer"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});nt.a.saveAs(t,a.state.title+".xlsx")})},a.queryTable=function(e){a.setState({loading:!0}),fetch(Ae.QUERY_TABLE_DETAIL_API+"?env="+a.props.env+"&id="+e,{method:"GET"}).then(function(e){if(console.log("response status ",200===e.status),200===e.status)return e.json();throw console.log("cannot get data"),new Error(e.status)}).then(function(e){console.log("still enter data?");for(var t=[],n=0;n<e.column.length;n++){var r=null;0==n&&(r="asc"),t.push({name:e.column[n],label:e.column[n]+" ["+e.type[n]+"]",options:{filter:!0,sortDirection:r}})}st&&a.setState({data:e.data,column:t,title:e.tableName,loading:!1})}).catch(function(e){console.log("error: "+e),a.setState({loading:!1})})},a.handleEdit=function(){var e=Xe.a.parse(a.props.location.search);a.props.history.push("/configtable/edittabledata?id="+e.id)},a.getMuiTheme=function(){return Object(v.createMuiTheme)({palette:{primary:be.a},typography:{useNextVariants:!0,fontSize:18},overrides:{MUIDataTableBodyCell:{root:{}},MUIDataTableSelectCell:{checked:{color:"#FF0266 !important"}}}})},a.state={title:"Config Table",column:[],data:[],row:20,loading:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){st=!0,this.props.highlightTabMenu(Ae.TABLE_MAPPING_INDEX);var e=Xe.a.parse(this.props.location.search);it=e.id,this.queryTable(it)}},{key:"componentWillUnmount",value:function(){st=!1}},{key:"render",value:function(){var e=this,t={rowsPerPage:this.state.row,rowsPerPageOptions:[20,50,100,this.state.data.length],selectableRows:!1,print:!1,download:!1,filterType:"textField",responsive:"scroll",onChangeRowsPerPage:function(t){e.setState({row:t})},customToolbar:function(){return e.props.userRole<1?null:r.a.createElement($e,{handleEdit:e.handleEdit})}};return r.a.createElement("div",null,r.a.createElement(ke.a,{active:this.state.loading,spinner:!0},r.a.createElement(v.MuiThemeProvider,{theme:this.getMuiTheme()},r.a.createElement(O.a,{variant:"contained",onClick:this.exportData,color:"secondary"},r.a.createElement(tt.a,null)),r.a.createElement(fe.a,{title:this.state.title,data:this.state.data,columns:this.state.column,options:t}))))}}]),t}(n.Component),ct=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",usernameError:!1},a.handleChange=function(e){return function(e){a.setState({username:e.target.value})}},a.handleSave=function(){""===a.state.username||" "===a.state.username?a.setState({usernameError:!0}):a.props.addUser(a.state.username)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("form",{className:e.container,noValidate:!0,autoComplete:"off"},r.a.createElement("br",null),r.a.createElement(Ne.a,{className:e.card},r.a.createElement(Pe.a,null,r.a.createElement(Me.a,{required:!0,error:this.state.usernameError,id:"username",label:"Username",className:e.textField,value:this.state.name,onChange:this.handleChange("name"),margin:"normal"}),this.state.usernameError&&r.a.createElement(Le.a,null,"This is required!")),r.a.createElement(Ie.a,null,r.a.createElement(O.a,{onClick:this.handleSave,variant:"contained",size:"large",color:"primary",className:e.margin},"Save"))))}}]),t}(r.a.Component),ut=Object(v.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},card:{minWidth:"100%"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:"50%"},dense:{marginTop:19},margin:{margin:e.spacing.unit}}})(ct),ht=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).queryUser=function(){a.setState({loading:!0}),fetch(Ae.QUERY_USER_API,{method:"GET"}).then(function(e){if(200===e.status)return e.json();throw console.log("cannot get data"),new Error(e.statusText)}).then(function(e){a.setState({data:e,loading:!1})}).catch(function(e){console.log("error: "+e),a.setState({loading:!1})})},a.addUser=function(e){a.setState({loading:!0}),fetch(Ae.ADD_USER_API,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:e})}).then(function(e){if(200===e.status)return e.json();throw console.log("cannot get data"),new Error(e.statusText)}).then(function(e){console.log("add user json ",e),a.isMount&&a.setState({loading:!1,showAlert:!0,alertType:"success",alertTitle:"Success!",alertMessage:"Successfully Add New User."})}).catch(function(e){console.log("error: "+e.message),a.setState({loading:!1,showAlert:!0,alertType:"error",alertTitle:"Error!",alertMessage:"Cannot Add User, Please try again. "+e.message})})},a.handleClose=function(){},a.deleteUser=function(e){a.setState({loading:!0}),fetch(Ae.DELETE_USER_API,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:e})}).then(function(e){if(200===e.status)return e.json();throw new Error(e.statusText)}).then(function(e){a.setState({showAlert:!0,alertType:"success",alertTitle:"Success!",alertMessage:"Successfully Delete User."}),a.queryUser()}).catch(function(e){a.setState({loading:!1,showAlert:!0,alertType:"error",alertTitle:"Error!",alertMessage:"Cannot Delete User, Please try again. "+e.message})})},a.getMuiTheme=function(){return Object(v.createMuiTheme)({palette:{primary:be.a},typography:{useNextVariants:!0,fontSize:18},overrides:{MUIDataTableBodyCell:{root:{}},MUIDataTableSelectCell:{checked:{color:"#FF0266 !important"}}}})},a.userColumns=[{name:"username",label:"Username",options:{filter:!0,sort:!0}}],a.state={title:"Manage Admin",data:[],column:[],loading:!0,showAlert:!1,alertType:"",alertTitle:"",alertMessage:""},a.changeTab=a.changeTab.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.isMount=!0,this.props.highlightTabMenu(Ae.MANAGE_ADMIN_INDEX),this.queryUser()}},{key:"componentWillUnmount",value:function(){this.isMount=!1}},{key:"changeTab",value:function(e){0===e?this.setState({title:"Manage Admin"}):1===e&&this.setState({title:"Add User"})}},{key:"render",value:function(){var e=this,t={filterType:"textField",responsive:"scroll",print:!1,onRowsDelete:function(t){for(var a in e.setState({loading:!0}),t.data)console.log("checking id ",t.data[a]," ",e.state.data[t.data[a].index].username),e.deleteUser(e.state.data[t.data[a].index].username)}};return r.a.createElement("div",null,r.a.createElement(ke.a,{active:this.state.loading,spinner:!0},r.a.createElement(Se,{changeTab:this.changeTab,items:["Manage Admin","Add User"]}),r.a.createElement(v.MuiThemeProvider,{theme:this.getMuiTheme()},"Manage Admin"===this.state.title?r.a.createElement(fe.a,{title:this.state.title,data:this.state.data.map(function(e){return[e.username]}),columns:this.userColumns,options:t}):r.a.createElement("div",null,r.a.createElement(Be.a,{show:this.state.showAlert,title:this.state.alertTitle,text:this.state.alertMessage,type:this.state.alertType,onOutsideClick:function(){return e.setState({showAlert:!1})},onConfirm:function(){return e.setState({showAlert:!1})}}),r.a.createElement(ut,{addUser:this.addUser})))))}}]),t}(n.Component),mt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleEdit=function(){a.props.history.push("/configtable/edittablemapping")},a.queryTable=function(){console.log("change env? ",a.state.env),fetch(Ae.QUERY_TABLE_MICROSERVICE_API+"?env="+a.state.env,{method:"GET"}).then(function(e){if(200===e.status)return e.json();throw console.log("cannot get data"),new Error(e.status)}).then(function(e){a.isMount&&a.setState({column:e.column,data:e.data,loading:!1})}).catch(function(e){console.log("error: "+e),a.setState({loading:!1})})},a.getMuiTheme=function(){return Object(v.createMuiTheme)({palette:{primary:be.a},typography:{useNextVariants:!0,fontSize:18},overrides:{MUIDataTableBodyCell:{root:{}},MUIDataTableSelectCell:{checked:{color:"#FF0266 !important"}}}})},a.isMount=!0,a.columns=[{name:"id",label:"ID",options:{filter:!0}},{name:"table",label:"Table",options:{filter:!0}},{name:"microservice",label:"Microservice",options:{filter:!0}}],a.state={title:"Config Table",data:[],column:[],row:50,env:a.props.env,loading:!0},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this,a=this.props;e.env!==a.env&&(console.log("component did update yeah new props ",a.env),this.setState({env:a.env,loading:!0},function(){t.queryTable()}))}},{key:"componentWillUnmount",value:function(){this.isMount=!1}},{key:"componentDidMount",value:function(){this.props.highlightTabMenu(Ae.TABLE_MAPPING_INDEX),this.queryTable(),console.log("please refresh state")}},{key:"render",value:function(){var e=this,t={rowsPerPage:this.state.row,rowsPerPageOptions:[50,100,150,this.state.data.length],selectableRows:!1,filterType:"textField",print:!1,responsive:"scroll",rowHover:!0,customToolbar:function(){return e.props.userRole<1?null:r.a.createElement($e,{title:"Add New Table",handleEdit:e.handleEdit})},onChangeRowsPerPage:function(t){e.setState({row:t})},onRowClick:function(t,a){console.log("check id",t[0]);var n="/configtable/detail?id="+t[0];e.props.history.push(n)}};return r.a.createElement("div",null,r.a.createElement(ke.a,{active:this.state.loading,spinner:!0},r.a.createElement(v.MuiThemeProvider,{theme:this.getMuiTheme()},r.a.createElement(fe.a,{title:this.state.title,data:0===!this.state.data.length?[]:this.state.data.map(function(e){return[e.id,e.table_name,e.microservice]}),columns:this.state.column,options:t}))))}}]),t}(n.Component),dt=a(92),pt=a(38),gt=a.n(pt),ft=a(104),Et=a.n(ft),bt=a(11),vt=a(138),yt=a.n(vt),Tt=a(139),wt=a.n(Tt),Ct=a(125),St=a.n(Ct),Ot=a(126),kt=a.n(Ot),At=a(103),Dt=a.n(At),jt=a(127),Mt=a.n(jt),_t=a(31),Nt=function(e){return e.rowNumber},Rt=0,It=Object(v.createMuiTheme)({typography:{useNextVariants:!0,fontSize:18},palette:{primary:ze.a,secondary:be.a}}),xt={add:function(e){var t=e.onExecute;return n.createElement("div",{style:{textAlign:"center"}},n.createElement(O.a,{color:"secondary",onClick:t,title:"Create new row"},"New"))},edit:function(e){var t=e.onExecute;return n.createElement(U.a,{onClick:t,title:"Edit row"},n.createElement(Ze.a,null))},delete:function(e){var t=e.onExecute;return n.createElement(U.a,{onClick:function(){window.confirm("Are you sure you want to delete this row?")&&t()},title:"Delete row"},n.createElement(Et.a,null))},commit:function(e){var t=e.onExecute;return n.createElement(U.a,{onClick:t,title:"Save changes"},n.createElement(yt.a,null))},cancel:function(e){var t=e.onExecute;return n.createElement(U.a,{color:"secondary",onClick:t,title:"Cancel changes"},n.createElement(wt.a,null))}},Pt=function(e){var t=e.id,a=e.onExecute,r=xt[t];return n.createElement(r,{onExecute:a})},Ut=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).getColumnName=function(e){return JSON.parse(JSON.stringify(e)).name},a.queryTable=function(e){a.setState({loading:!0}),fetch(Ae.QUERY_TABLE_DETAIL_API+"?env="+a.props.env+"&id="+e,{method:"GET"}).then(function(e){if(200===e.status)return e.json();throw new Error(e.statusText)}).then(function(e){for(var t=[],n=0;n<e.column.length;n++)t.push({name:e.column[n],label:e.column[n],options:{filter:!0}});e.data,a.isMount&&a.setState({rows:e.data,columns:t,loading:!1,tableName:e.tableName})}).catch(function(e){a.setState({loading:!1,showAlert:!0,alertType:"error",alertTitle:"Error!",alertMessage:"Error occurred, "+e.message})})},a.addData=function(e){var t={};Object.keys(e[0]).forEach(function(a){t[a]=e[0][a]}),a.totalBeforeData.push({}),a.totalAfterData.push(t)},a.updateData=function(e,t){var n=e,r={};Object.keys(t).forEach(function(e){r=t[e]}),a.totalBeforeData.push(n),a.totalAfterData.push(r),console.log("check before update data ",a.totalBeforeData),console.log("check after update data ",a.totalAfterData)},a.deleteData=function(e,t){delete e.rowNumber;var n=e;a.totalBeforeData.push(n),a.totalAfterData.push({}),console.log("check delete before data ",a.totalBeforeData),console.log("check delete after data ",a.totalAfterData)},a.handleSave=function(){0!==a.totalBeforeData.length&&0!==a.totalAfterData.length&&a.setState({openDialog:!0})},a.handleClose=function(){a.setState({openDialog:!1})},a.handleChange=function(e){return function(t){a.setState(Object(f.a)({},e,t.target.value))}},a.saveAllData=function(){var e=!1,t=!1;if(""!==a.state.description&&" "!==a.state.description||(e=!0),""!==a.state.devTask&&" "!==a.state.devTask||(t=!0),e||t)a.setState({descriptionError:e,devTaskError:t});else{a.setState({loading:!0,openDialog:!1,descriptionError:!1});var n=Xe.a.parse(a.props.location.search).id;fetch(Ae.SAVE_TABLE_DETAIL_API,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:n,env:a.props.env,username:a.props.username,before:a.totalBeforeData,after:a.totalAfterData,description:a.state.description,devTask:a.state.devTask})}).then(function(e){if(200===e.status)return a.setState({loading:!1,showAlert:!0,alertType:"success",alertTitle:"Success!",alertMessage:"Successfully Save Table Data."}),a.props.history.push("/configtable/detail?id="+Rt),e.json();throw new Error(e.statusText)}).catch(function(e){a.setState({loading:!1,showAlert:!0,alertType:"success",alertTitle:"Success!",alertMessage:"Cannot Save Table Data, Please try again. "+e.message}),a.props.history.push("/configtable/detail?id="+Rt)})}},a.isEmpty=function(e){return!Object.keys(e).length>0},a.state={tableName:"",columns:[],rows:[],loading:!1,selections:[],pageSizes:[10,20,50,0],showAlert:!1,alertType:"",alertTitle:"",alertMessage:"",openDialog:!1,description:"",devTask:"",devTaskError:!1,descriptionError:!1},a.updateData=a.updateData.bind(Object(p.a)(Object(p.a)(a))),a.commitChanges=a.commitChanges.bind(Object(p.a)(Object(p.a)(a))),a.totalBeforeData=[],a.totalAfterData=[],a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.isMount=!0,this.props.highlightTabMenu(Ae.TABLE_MAPPING_INDEX);var e=Xe.a.parse(this.props.location.search);Rt=e.id,this.queryTable(Rt)}},{key:"componentWillUnmount",value:function(){this.isMount=!1}},{key:"commitChanges",value:function(e){var t,a=e.added,n=e.changed,r=e.deleted,o=this.state.rows;if(a&&Object.keys(a[0]).length>0){var i=o.length>0?o[o.length-1].rowNumber+1:0;o=[].concat(Object(dt.a)(o),Object(dt.a)(a.map(function(e,t){return Object(g.a)({rowNumber:i+t},e)}))),this.addData(a)}if(n){o.forEach(function(e){n[e.rowNumber]&&(t=e.rowNumber)}),o=o.map(function(e){return n[e.rowNumber]?Object(g.a)({},e,n[e.rowNumber]):e});var s=this.state.rows[t];this.updateData(s,n)}if(r){var l=new Set(r);o=o.filter(function(e){return!l.has(e.rowNumber)});var c=this.state.rows[r[0]];this.deleteData(c,r)}this.setState({rows:o}),console.log("checking rows eiei ",o)}},{key:"getRowIndex",value:function(e,t){return"index"===t?this.state.rows.indexOf(e):e[t]}},{key:"render",value:function(){var e=this,t=this.state,a=t.rows,r=t.columns;return n.createElement("div",null,0!==r.length?n.createElement(ke.a,{active:this.state.loading,spinner:!0},n.createElement(v.MuiThemeProvider,{theme:It},n.createElement(Be.a,{show:this.state.showAlert,title:this.state.alertTitle,text:this.state.alertMessage,type:this.state.alertType,onOutsideClick:function(){return e.setState({showAlert:!1})},onConfirm:function(){return e.setState({showAlert:!1})}}),n.createElement(St.a,{open:this.state.openDialog,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",maxWidth:"sm",fullWidth:!0},n.createElement(Mt.a,{id:"form-dialog-title"},"Submit your description to save this config table"),n.createElement(Dt.a,null,n.createElement(Me.a,{autoFocus:!0,required:!0,error:this.state.descriptionError,margin:"dense",id:"description",label:"Description",type:"text",value:this.state.description,multiline:!0,rowsMax:"10",onChange:this.handleChange("description"),fullWidth:!0}),this.state.descriptionError&&n.createElement(Le.a,null,"This is required!")),n.createElement(Dt.a,null,n.createElement(Me.a,{required:!0,error:this.state.devTaskError,margin:"dense",id:"devTask",label:"Dev Task number",type:"text",value:this.state.devTask,onChange:this.handleChange("devTask"),fullWidth:!0}),this.state.devTaskError&&n.createElement(Le.a,null,"This is required!")),n.createElement(kt.a,null,n.createElement(O.a,{onClick:this.handleClose,color:"primary"},"Cancel"),n.createElement(O.a,{variant:"contained",onClick:this.saveAllData,color:"secondary"},"Save"))),n.createElement("span",null,n.createElement("h2",null,""!==this.state.tableName?this.state.tableName+" - Edit":"")),n.createElement(O.a,{variant:"contained",color:"secondary",onClick:this.handleSave},"Save"),n.createElement("br",null),n.createElement(gt.a,null,n.createElement(_t.a,{rows:a,columns:r,getRowId:Nt},n.createElement(bt.m,null),n.createElement(bt.d,{defaultFilters:[]}),n.createElement(bt.g,null),n.createElement(bt.k,{defaultCurrentPage:0,defaultPageSize:0}),n.createElement(bt.h,null),n.createElement(bt.n,null),0!==r.length?n.createElement(bt.n,{defaultSorting:[{columnName:r[0].name,direction:"desc"}]}):n.createElement(bt.n,null),n.createElement(bt.i,null),n.createElement(_t.d,null),n.createElement(_t.j,{height:"auto"}),n.createElement(_t.h,{showSortingControls:!0}),n.createElement(_t.b,{pageSizes:this.state.pageSizes}),n.createElement(bt.c,{onCommitChanges:this.commitChanges,onEditingRowIdsChange:this.changeEditingRowIds}),n.createElement(_t.f,null),n.createElement(_t.e,{showAddCommand:!0,showEditCommand:!0,showDeleteCommand:!0,commandComponent:Pt}),n.createElement(_t.i,null),n.createElement(_t.c,null),n.createElement(_t.g,null))))):n.createElement("div",null))}}]),t}(n.PureComponent),Lt=Object(v.createMuiTheme)({typography:{useNextVariants:!0,fontSize:18}}),Vt={add:function(e){var t=e.onExecute;return n.createElement("div",{style:{textAlign:"center"}},n.createElement(O.a,{color:"primary",onClick:t,title:"Create new row"},"New"))},edit:function(e){var t=e.onExecute;return n.createElement(U.a,{onClick:t,title:"Edit row"},n.createElement(Ze.a,null))},delete:function(e){var t=e.onExecute;return n.createElement(U.a,{onClick:function(){window.confirm("Are you sure you want to delete this row?")&&t()},title:"Delete row"},n.createElement(Et.a,null))},commit:function(e){var t=e.onExecute;return n.createElement(U.a,{onClick:t,title:"Save changes"},n.createElement(yt.a,null))},cancel:function(e){var t=e.onExecute;return n.createElement(U.a,{color:"secondary",onClick:t,title:"Cancel changes"},n.createElement(wt.a,null))}},Bt=function(e){var t=e.id,a=e.onExecute,r=Vt[t];return n.createElement(r,{onExecute:a})},Ft=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).getColumnName=function(e){return JSON.parse(JSON.stringify(e)).name},a.queryTable=function(){a.setState({loading:!0}),fetch(Ae.QUERY_TABLE_MICROSERVICE_API+"?env="+a.props.env,{method:"GET"}).then(function(e){if(console.log("response status ",200===e.status),200===e.status)return e.json();throw console.log("cannot get data"),new Error(e.status)}).then(function(e){console.log("still enter data? ");for(var t=[],n=0;n<e.column.length;n++)t.push({name:e.column[n],label:e.column[n],options:{filter:!0}});a.isMount&&a.setState({rows:e.data,columns:t,loading:!1})}).catch(function(e){console.log("error: "+e),a.setState({loading:!1})})},a.addData=function(e){console.log("rows is rows ",e[0].id)},a.updateData=function(){},a.deleteData=function(){},a.state={tableName:"",columns:[],rows:[],loading:!1,pageSizes:[20,50,100,0]},a.commitChanges=a.commitChanges.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.isMount=!0,this.props.highlightTabMenu(Ae.TABLE_MAPPING_INDEX),this.queryTable()}},{key:"componentWillUnmount",value:function(){this.isMount=!1}},{key:"commitChanges",value:function(e){var t=e.added,a=e.changed,n=e.deleted;console.log("commit changes ",t," ",a," ",n);var r=this.state.rows;if(t){var o=r.length>0?r[r.length-1].id+1:0;r=[].concat(Object(dt.a)(r),Object(dt.a)(t.map(function(e,t){return Object(g.a)({id:o+t},e)}))),this.addData(t)}if(a&&(r=r.map(function(e){return a[e.id]?Object(g.a)({},e,a[e.id]):e})),n){var i=new Set(n);r=r.filter(function(e){return!i.has(e.id)})}this.setState({rows:r})}},{key:"render",value:function(){var e=this.state,t=e.rows,a=e.columns;return n.createElement(ke.a,{active:this.state.loading,spinner:!0},n.createElement(v.MuiThemeProvider,{theme:Lt},n.createElement("span",null),n.createElement(gt.a,null,n.createElement(_t.a,{rows:t,columns:a},n.createElement(bt.m,null),n.createElement(bt.d,{defaultFilters:[]}),n.createElement(bt.g,null),n.createElement(bt.k,{defaultCurrentPage:0,defaultPageSize:0}),n.createElement(bt.h,null),n.createElement(bt.n,null),n.createElement(bt.i,null),n.createElement(_t.d,null),n.createElement(_t.j,{height:"auto"}),n.createElement(_t.h,{showSortingControls:!0}),n.createElement(_t.b,{pageSizes:this.state.pageSizes}),n.createElement(bt.c,{onCommitChanges:this.commitChanges}),n.createElement(_t.f,null),n.createElement(_t.e,{showAddCommand:!0,showEditCommand:!0,showDeleteCommand:!0,commandComponent:Bt}),n.createElement(_t.i,null),n.createElement(_t.c,null),n.createElement(_t.g,null)))))}}]),t}(n.PureComponent),zt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).exportData=function(){ot.a.post(Ae.EXPORT_DATA_API,a.state.flywayData,{responseType:"arraybuffer"}).then(function(e){var t=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});nt.a.saveAs(t,"FlywayTable_"+a.state.username+".xlsx")})},a.queryFlywayTable=function(){a.setState({loading:!0}),fetch(Ae.QUERY_FLYWAY_TABLE_API,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({env:a.props.env,username:a.state.username})}).then(function(e){if(200===e.status)return console.log("Flyway Container ---\x3e receive response"),e.json();throw new Error(e.status)}).then(function(e){console.log("FlywaytableContainer: ","isMount",a.isMount),a.isMount&&a.setState({flywayData:e,loading:!1})}).catch(function(e){a.setState({loading:!1})})},a.getMuiTheme=function(){return Object(v.createMuiTheme)({palette:{primary:be.a},typography:{useNextVariants:!0,fontSize:18},overrides:{MUIDataTableBodyCell:{root:{}},MUIDataTableSelectCell:{checked:{color:"#FF0266 !important"}}}})},console.log("check username ",a.props.username),a.fullColumns=[{name:"id",label:"ID",options:{filter:!0,sort:!0,sortDirection:"asc"}},{name:"flywayScript",label:"Flyway Script",options:{filter:!0,sort:!0}},{name:"author",label:"Author",options:{filter:!0,sort:!0}},{name:"timestamp",label:"Timestamp",options:{filter:!0,sort:!0}}],a.state={title:"Flyway Table",flywayData:[],column:a.fullColumns,username:a.props.username,loading:!1,row:50},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.isMount=!0,this.props.highlightTabMenu(Ae.FLYWAY_TABLE_INDEX),this.queryFlywayTable()}},{key:"componentWillUnmount",value:function(){this.isMount=!1}},{key:"render",value:function(){var e=this,t={filterType:"textField",rowsPerPage:this.state.row,rowsPerPageOptions:[50,100,200,this.state.flywayData.length],selectableRows:!1,responsive:"scroll",download:!1,print:!1,onChangeRowsPerPage:function(t){e.setState({row:t})}};return r.a.createElement("div",null,r.a.createElement(ke.a,{active:this.state.loading,spinner:!0},r.a.createElement(v.MuiThemeProvider,{theme:this.getMuiTheme()},r.a.createElement(O.a,{variant:"contained",onClick:this.exportData,color:"secondary"},r.a.createElement(tt.a,null)),r.a.createElement(fe.a,{title:this.state.title,data:this.state.flywayData.map(function(e){return[e.id,e.flyway_script,e.author,e.timestamp]}),columns:this.state.column,options:t}))))}}]),t}(n.Component),qt=a(272),Wt=a(257),Yt=a.n(Wt),Gt=a(259),Xt=a.n(Gt),Qt=a(260),Jt=a.n(Qt),Kt=a(261),Zt=a.n(Kt),Ht=a(168),$t=a.n(Ht),ea=a(169),ta=a.n(ea),aa=a(131),na=a.n(aa),ra=a(99),oa=a.n(ra),ia=a(258),sa=a.n(ia),la={success:Yt.a,warning:sa.a,error:Xt.a,info:Jt.a};var ca=Object(v.withStyles)(function(e){return{success:{backgroundColor:$t.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:ta.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.className,n=e.message,o=e.onClose,i=e.variant,s=Object(qt.a)(e,["classes","className","message","onClose","variant"]),l=la[i];return r.a.createElement(oa.a,Object.assign({className:b()(t[i],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(l,{className:b()(t.icon,t.iconVariant)}),n),action:[r.a.createElement(U.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:o},r.a.createElement(Zt.a,{className:t.icon}))]},s))}),ua=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleClose=function(e,t){if(console.log("check handle close ",t),"clickaway"===t)return console.log("check handle close reason ",t),void a.setState({open:!1});a.setState({open:!1})},a.state={open:a.props.open,status:a.props.status,message:a.props.message},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props;e!==t&&this.setState({open:t.open,status:t.status,message:t.message})}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement(na.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.open,autoHideDuration:2e3,onClose:this.handleClose},this.state.status===Ae.SNACK_BAR_SUCCESS?r.a.createElement(ca,{variant:"success",className:e.margin,message:this.props.message,onClose:this.handleClose}):this.state.status===Ae.SNACK_BAR_ERROR?r.a.createElement(ca,{variant:"error",className:e.margin,message:this.props.message,onClose:this.handleClose}):r.a.createElement("div",null)))}}]),t}(r.a.Component),ha=Object(v.withStyles)(function(e){return{margin:{margin:e.spacing.unit}}})(ua),ma=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).onChange=function(e){if(a.hasExtension(e.target.files[0].name,[".xlsx",".csv"])){console.log("has required extension");var t=e.target.files;a.setState({files:t})}else a.setState({showSnack:!0,snackStatus:Ae.SNACK_BAR_ERROR,snackMessage:"Wrong file format, Please upload only .xlsx or .csv file."})},a.handleSave=function(){var e=new FormData;e.append("file",a.state.files[0]),e.append("env",a.props.env),a.uploadFile(e)},a.uploadFile=function(e){a.setState({loading:!0}),fetch(Ae.EDIT_TABLE_API,{method:"POST",body:e}).then(function(e){if(200===e.status)return e.json();throw console.log("cannot get data"),new Error(e.status)}).then(function(e){console.log("add user json ",e),a.isMount&&a.setState({loading:!1,showSnack:!0,snackStatus:Ae.SNACK_BAR_SUCCESS,snackMessage:"Successfully Add New User."})}).catch(function(e){console.log("error: "+e),a.setState({loading:!1,showSnack:!0,snackStatus:Ae.SNACK_BAR_ERROR,snackMessage:"Cannot Add User, Please try again."})})},a.hasExtension=function(e,t){return new RegExp("("+t.join("|").replace(/\./g,"\\.")+")$","i").test(e)},a.getMuiTheme=function(){return Object(v.createMuiTheme)({palette:{primary:be.a},typography:{useNextVariants:!0,fontSize:18},overrides:{MUIDataTableBodyCell:{root:{}},MUIDataTableSelectCell:{checked:{color:"#FF0266 !important"}}}})},a.state={title:"Manage Admin",data:[],column:[],loading:!1,showSnack:!1,snackStatus:Ae.SNACK_BAR_SUCCESS,snackMessage:"",files:null},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.isMount=!0,this.props.highlightTabMenu(Ae.EDIT_TABLE_INDEX)}},{key:"componentWillUnmount",value:function(){this.isMount=!1}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",null,r.a.createElement(ke.a,{active:this.state.loading,spinner:!0},r.a.createElement(v.MuiThemeProvider,{theme:this.getMuiTheme()},r.a.createElement("div",null,r.a.createElement(ha,{open:this.state.showSnack,status:this.state.snackStatus,message:this.state.snackMessage}),r.a.createElement(Ne.a,{className:t.card},r.a.createElement("div",{onSubmit:this.onFormSubmit},r.a.createElement("h1",{className:t.margin},"Upload Table Structure File Here"),r.a.createElement("input",{type:"file",name:"file",onChange:function(t){return e.onChange(t)},className:t.margin})),r.a.createElement("br",null),r.a.createElement(O.a,{onClick:this.handleSave,variant:"contained",size:"large",color:"primary",className:t.margin},"Save"))))))}}]),t}(r.a.PureComponent),da=(Object(v.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},card:{minWidth:"100%"},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:"50%"},dense:{marginTop:19},margin:{margin:e.spacing.unit}}})(ma),["Tables","Flyways","Version Control","Add Version Control","Manage Admin","Tutorial"]),pa=[r.a.createElement(oe.a,null),r.a.createElement(se.a,null),r.a.createElement(q.a,null),r.a.createElement(F.a,null),r.a.createElement(Y.a,null),r.a.createElement(X.a,null)],ga="",fa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).handleDrawerOpen=function(){a.setState({open:!0})},a.handleDrawerClose=function(){a.setState({open:!1})},a.highlightTabMenu=function(e){a.setState({selected:da[e]})},a.handleChange=function(e){a.setState({auth:e.target.checked})},a.handleListMenu=function(e,t){switch(console.log("check key",e," ",t),e){case"Tables":a.setState({selected:da[t]}),a.props.history.push("/configtable");break;case"Flyways":a.setState({selected:da[t]}),a.props.history.push("/flywaytable");break;case"Version Control":a.setState({selected:da[t]}),a.props.history.push("/versioncontrol");break;case"Add Version Control":a.setState({selected:da[t]}),a.props.history.push("/versioncontrol/add");break;case"Manage Admin":a.setState({selected:da[t]}),a.props.history.push("/manageadmin");break;case"Tutorial":a.setState({selected:da[t]}),a.props.history.push("/tutorial")}},a.handleProfileMenu=function(e){console.log("event current ",e.currentTarget),a.setState({anchorEl:e.currentTarget,profileOpen:!0})},a.handleEnvMenu=function(e){console.log("event current ",e.currentTarget),a.setState({anchorEl:e.currentTarget,envOpen:!0})},a.handleClose=function(){a.setState({anchorEl:null,envOpen:!1,profileOpen:!1})},a.handleLogout=function(){a.setState({profileOpen:!1}),a.props.logout()},a.handleClickUserFlywayTable=function(){a.handleListMenu("Flyways",1),a.setState({profileOpen:!1})},a.handleChangeEnv=function(e){a.setState({env:e,anchorEl:null,envOpen:!1,profileOpen:!1,selected:"Tables"}),a.props.history.replace("/configtable")},a.handleListMenu=a.handleListMenu.bind(Object(p.a)(Object(p.a)(a))),a.state={env:Ae.DEV4,envOpen:!1,profileOpen:!1,anchorEl:null,selected:null,username:a.props.username},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){if(console.log("user role is here ",this.props.userRole),0===this.props.userRole){for(var e=0;e<da.length;e++)"Add Version Control"===da[e]&&(da.splice(e,1),pa.splice(e,1)),"Manage Admin"===da[e]&&(da.splice(e,1),pa.splice(e,1)),"Flyways"===da[e]&&(da.splice(e,1),pa.splice(e,1));console.log("remaining menu ",da)}else if(1===this.props.userRole){ga="Admin";for(e=0;e<da.length;e++)"Add Version Control"===da[e]&&(da.splice(e,1),pa.splice(e,1)),"Manage Admin"===da[e]&&(da.splice(e,1),pa.splice(e,1))}else 2===this.props.userRole&&(ga="Super Admin");this.setState({loading:!1})}},{key:"render",value:function(){var e,t,n=this,o=this.props,i=o.classes,s=o.theme,l=this.state,c=l.anchorEl,u=l.selected,h=l.env,m=l.open,p=l.username,g=this.state.envOpen,E=this.state.profileOpen,v=Boolean(c);return r.a.createElement("div",{className:i.root},r.a.createElement(_.a,null),r.a.createElement(C.a,{position:"fixed",className:b()(i.appBarGradient,i.appBar,Object(f.a)({},i.appBarShift,m))},r.a.createElement(A.a,{disableGutters:!m},r.a.createElement(U.a,{color:"inherit","aria-label":"Open drawer",onClick:this.handleDrawerOpen,className:b()(i.menuButton,Object(f.a)({},i.hide,m))},r.a.createElement(V.a,null)),r.a.createElement("img",{src:a(540),alt:"configMonsterLogo",width:"30",height:"30",className:"d-inline-block align-top"}),r.a.createElement("h1",null,"\xa0"),r.a.createElement(R.a,{variant:"h6",color:"inherit",className:i.grow},"Config Monster"),r.a.createElement(O.a,{variant:"contained",style:{backgroundColor:"#f9a825",fontWeight:"bold",pointerEvents:"none"},className:"d-inline-block align-top"},ga),r.a.createElement("label",null,"\xa0"),r.a.createElement("div",null,r.a.createElement(O.a,{variant:"contained",color:"secondary","aria-owns":v?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:this.handleEnvMenu},h),r.a.createElement(de.a,{id:"simple-menu",anchorEl:c,open:g,onClose:this.handleClose},r.a.createElement(he.a,{onClick:this.handleChangeEnv.bind(this,Ae.DEV2)},Ae.DEV2),r.a.createElement(he.a,{onClick:this.handleChangeEnv.bind(this,Ae.DEV3)},Ae.DEV3),r.a.createElement(he.a,{onClick:this.handleChangeEnv.bind(this,Ae.DEV4)},Ae.DEV4),r.a.createElement(he.a,{onClick:this.handleChangeEnv.bind(this,Ae.DEV5)},Ae.DEV5)),r.a.createElement(U.a,{"aria-owns":v?"menu-appbar":void 0,"aria-haspopup":"true",onClick:this.handleProfileMenu,color:"inherit"},r.a.createElement(ce.a,null)),r.a.createElement(de.a,{id:"menu-appbar",anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:E,onClose:this.handleClose},0!==this.props.userRole?r.a.createElement(he.a,{onClick:this.handleClickUserFlywayTable},"My Flyways Table"):r.a.createElement("div",null),r.a.createElement(he.a,{onClick:this.handleLogout},"Log Out"))))),r.a.createElement(T.a,{variant:"permanent",className:b()(i.drawer,(e={},Object(f.a)(e,i.drawerOpen,m),Object(f.a)(e,i.drawerClose,!m),e)),classes:{paper:b()(i.sideBarGradient,(t={},Object(f.a)(t,i.drawerOpen,m),Object(f.a)(t,i.drawerClose,!m),t))},open:m},r.a.createElement("div",{className:i.toolbar},r.a.createElement(U.a,{className:i.whiteColor,onClick:this.handleDrawerClose},"rtl"===s.direction?r.a.createElement(Z.a,null):r.a.createElement(J.a,null))),r.a.createElement(x.a,null),r.a.createElement(j.a,null,da.map(function(e,t){return r.a.createElement($.a,{button:!0,key:e,id:e,selected:u===da[t],onClick:n.handleListMenu.bind(n,e,t)},r.a.createElement(te.a,{className:i.whiteColor},pa[t]),r.a.createElement(ne.a,{primary:r.a.createElement(R.a,{variant:"subtitle1",style:{color:"#ffffff"}},e)}))}))),r.a.createElement("main",{className:b()(i.content)},r.a.createElement("div",{className:i.toolbar}),r.a.createElement(pe.a,null,r.a.createElement(d.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(mt,Object.assign({},e,{highlightTabMenu:n.highlightTabMenu,env:h}))}}),r.a.createElement(d.a,{exact:!0,path:"/configtable",render:function(e){return r.a.createElement(mt,Object.assign({},e,{highlightTabMenu:n.highlightTabMenu,env:h,userRole:n.props.userRole}))}}),r.a.createElement(d.a,{path:"/configtable/detail",render:function(e){return r.a.createElement(lt,Object.assign({},e,{highlightTabMenu:n.highlightTabMenu,env:h,userRole:n.props.userRole}))}}),r.a.createElement(d.a,{path:"/flywaytable",render:function(e){return r.a.createElement(zt,Object.assign({},e,{highlightTabMenu:n.highlightTabMenu,env:h,username:p}))}}),r.a.createElement(d.a,{exact:!0,path:"/versioncontrol",render:function(e){return r.a.createElement(De,Object.assign({},e,{highlightTabMenu:n.highlightTabMenu,env:h}))}}),r.a.createElement(d.a,{path:"/manageadmin",render:function(e){return r.a.createElement(ht,Object.assign({},e,{highlightTabMenu:n.highlightTabMenu,env:h}))}}),r.a.createElement(d.a,{path:"/configtable/edittabledata",render:function(e){return r.a.createElement(Ut,Object.assign({},e,{highlightTabMenu:n.highlightTabMenu,env:h,username:p}))}}),r.a.createElement(d.a,{path:"/configtable/edittablemapping",render:function(e){return r.a.createElement(Ft,Object.assign({},e,{highlightTabMenu:n.highlightTabMenu,env:h}))}}),r.a.createElement(d.a,{path:"/versioncontrol/add",render:function(e){return r.a.createElement(Ye,Object.assign({},e,{highlightTabMenu:n.highlightTabMenu,env:h}))}}))))}}]),t}(r.a.Component),Ea=Object(v.withStyles)(function(e){return{root:{display:"flex"},appBarGradient:{background:"linear-gradient(45deg, #c31432 30%, #240b36 100%)"},sideBarGradient:{background:"linear-gradient(45deg, #000000 10%, #434343 90%)",color:"white"},whiteColor:{color:"white",textColor:"#ffffff",primaryTextColor:"#ffffff"},contentBgColor:{background:"linear-gradient(0deg, #434343 30%, #E1E2E1 100%)"},grow:{flexGrow:1},appBar:{zIndex:e.zIndex.drawer+1,height:"4em",transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:0})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:0})},menuButton:{marginLeft:12,marginRight:36},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:0})},drawerClose:Object(f.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:0}),overflowX:"hidden",width:7*e.spacing.unit+1},e.breakpoints.up("sm"),{width:9*e.spacing.unit+1}),toolbar:Object(g.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),content:{flexGrow:1,padding:3*e.spacing.unit}}},{withTheme:!0})(fa),ba=a(271),va=a.n(ba),ya=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).logout=function(){a.state.keycloak.logout({clientId:"auditmonster-localhost"})},a.state={keycloak:null,authenticated:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=va()({realm:"master",url:"https://keycloak.devops.easy2easiest.com/auth","ssl-required":"external",clientId:"configmonster","public-client":!0,"confidential-port":0});console.log("keycloak : ",t),t.init({onLoad:"login-required"}).success(function(a){t.loadUserProfile().success(function(n){fetch(Ae.QUERY_USER_ROLE_API,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:n.username})}).then(function(e){return console.log("response status ",200===e.status),200===e.status?e.json():(console.log("cannot get data"),{role_config:0})}).then(function(r){console.log("check role config of user ",r[0]),e.setState({user:n,userRole:r[0].role_config,keycloak:t,authenticated:a})}).catch(function(t){console.log("error: "+t),e.setState({loading:!1})}),console.log("check user profile ",n)}).error(function(e){console.log("Failed to load User Profile : ",e)})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},this.state.authenticated?r.a.createElement(d.a,{render:function(t){return r.a.createElement(Ea,Object.assign({},t,{logout:e.logout,userRole:e.state.userRole,username:e.state.user.username,hello:"hello"}))}}):r.a.createElement("div",null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(s.a,null,r.a.createElement(ya,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[273,1,2]]]);
//# sourceMappingURL=main.c40df441.chunk.js.map